{% extends 'blog/base.html' %}
{% load blog_tags %}

{% block title %}Search{% endblock title %}

{% block content %}

{% if query %}
<h1>Posts containing "{{query}}"</h1>

<h3>
    {% with results.count as total_results %}
    <p>Found {{total_results }} result{{total_results | pluralize }}</p>
    {% endwith %}
</h3>

{% for post in results %}
<h2><a href="{{post.get_absolute_url}}">{{post.title}}</a></h2>
<p>{{post.body | truncatewords_html:12 }}</p>

{% empty %}
<p>There are no search results for your query.</p>

{% endfor %}
<p><a href="{% url 'blog:post_search' %}">Search again.</a></p>

{% else %}

<h1>Search for posts.</h1>
<form method="get">
    {{form.as_p}}
    <input type="submit" value="Search">
</form>

{% endif %}

{% endblock content %}